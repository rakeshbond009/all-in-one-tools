<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Compressor - Free Online Tool</title>
    <meta name="description" content="Compress PDF files online for free while maintaining quality. Reduce PDF file size easily, no registration required.">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--bs-primary);
            background: #fff;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: var(--bs-primary);
            margin-bottom: 1rem;
        }
        
        .file-info {
            margin-top: 1rem;
            display: none;
        }
        
        .compression-options {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            background: #fff;
        }
        
        .quality-slider {
            width: 100%;
        }
        
        .progress {
            height: 0.5rem;
            margin-top: 1rem;
        }
        
        .features-list {
            margin-top: 3rem;
        }
        
        .feature-item {
            text-align: center;
            padding: 1.5rem;
        }
        
        .feature-icon {
            font-size: 2rem;
            color: var(--bs-primary);
            margin-bottom: 1rem;
        }

        .file-size {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .compression-level {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
        }

        .compression-level span {
            font-size: 0.8rem;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <div class="container">
            <a class="navbar-brand" href="../index.html">All-in-One Tools</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#image-tools">Image Tools</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="../index.html#pdf-tools">PDF Tools</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#text-tools">Text Tools</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#developer-tools">Developer Tools</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <main class="container py-4">
        <!-- Tool Section -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h1 class="display-4 mb-3">PDF Compressor</h1>
                <p class="lead mb-4">Reduce PDF file size while maintaining quality</p>
            </div>
        </div>

        <!-- Upload Section -->
        <div class="row justify-content-center mb-5">
            <div class="col-md-8">
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3>Drag & Drop your PDF file here</h3>
                    <p class="text-muted">or</p>
                    <button class="btn btn-primary btn-lg" onclick="document.getElementById('fileInput').click()">
                        Choose File
                    </button>
                    <input type="file" id="fileInput" accept=".pdf" style="display: none;">
                </div>

                <!-- File Info and Compression Options -->
                <div class="file-info" id="fileInfo">
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <i class="fas fa-file-pdf text-danger me-2"></i>
                            <span id="fileName">document.pdf</span>
                            <div class="file-size">Original size: <span id="fileSize">0 MB</span></div>
                        </div>
                        <button class="btn btn-sm btn-danger" id="removeFile">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="compression-options">
                        <h4 class="mb-3">Compression Options</h4>
                        
                        <!-- Compression Level -->
                        <div class="mb-4">
                            <label class="form-label">Compression Level</label>
                            <input type="range" class="form-range quality-slider" id="compressionLevel" min="1" max="4" value="2">
                            <div class="compression-level">
                                <span>Basic</span>
                                <span>Recommended</span>
                                <span>Strong</span>
                                <span>Maximum</span>
                            </div>
                        </div>

                        <!-- Expected Size -->
                        <div class="mb-4">
                            <label class="form-label">Expected File Size</label>
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                Estimated size after compression: <strong id="estimatedSize">0 MB</strong>
                            </div>
                        </div>

                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <button class="btn btn-primary w-100 mt-3" id="compressBtn">
                            Compress PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="row features-list">
            <div class="col-md-4 feature-item">
                <i class="fas fa-compress feature-icon"></i>
                <h4>Smart Compression</h4>
                <p>Optimize file size intelligently</p>
            </div>
            <div class="col-md-4 feature-item">
                <i class="fas fa-eye feature-icon"></i>
                <h4>Quality Control</h4>
                <p>Choose your compression level</p>
            </div>
            <div class="col-md-4 feature-item">
                <i class="fas fa-check-circle feature-icon"></i>
                <h4>Preview Size</h4>
                <p>See estimated file size before compression</p>
            </div>
        </div>

        <!-- How to Use Section -->
        <div class="row mt-5">
            <div class="col-12">
                <h2 class="text-center mb-4">How to Use</h2>
                <div class="row">
                    <div class="col-md-3 text-center">
                        <div class="p-3">
                            <i class="fas fa-upload fa-2x text-primary mb-3"></i>
                            <h5>1. Upload PDF</h5>
                            <p>Select or drag & drop your PDF file</p>
                        </div>
                    </div>
                    <div class="col-md-3 text-center">
                        <div class="p-3">
                            <i class="fas fa-sliders-h fa-2x text-primary mb-3"></i>
                            <h5>2. Choose Level</h5>
                            <p>Select compression intensity</p>
                        </div>
                    </div>
                    <div class="col-md-3 text-center">
                        <div class="p-3">
                            <i class="fas fa-compress fa-2x text-primary mb-3"></i>
                            <h5>3. Compress</h5>
                            <p>Start the compression process</p>
                        </div>
                    </div>
                    <div class="col-md-3 text-center">
                        <div class="p-3">
                            <i class="fas fa-download fa-2x text-primary mb-3"></i>
                            <h5>4. Download</h5>
                            <p>Get your compressed PDF file</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-light border-top py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>About All-in-One Tools</h5>
                    <p>A collection of free online tools to help with your daily tasks.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p>&copy; 2024 All-in-One Tools. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <!-- PDF-lib for PDF manipulation -->
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib/dist/pdf-lib.min.js"></script>
    <!-- Download.js for file handling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/downloadjs/1.4.8/download.min.js"></script>
    <!-- Custom JS -->
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/pdf-tools.js"></script>
    <script>
        // Wait for PDF-lib to load
        window.addEventListener('load', function() {
            if (typeof PDFLib === 'undefined') {
                alert('Error: PDF library not loaded. Please refresh the page.');
                return;
            }

            const pdfTools = new PDFTools();
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            const removeFile = document.getElementById('removeFile');
            const compressBtn = document.getElementById('compressBtn');
            const progressBar = document.querySelector('.progress-bar');
            const compressionLevel = document.getElementById('compressionLevel');
            const estimatedSize = document.getElementById('estimatedSize');

            // Handle drag and drop
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--bs-primary)';
                uploadArea.style.background = '#fff';
            });

            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#dee2e6';
                uploadArea.style.background = '#f8f9fa';
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                const files = e.dataTransfer.files;
                handleFile(files[0]);
            });

            // Handle file selection
            fileInput.addEventListener('change', (e) => {
                handleFile(e.target.files[0]);
            });

            // Remove file
            removeFile.addEventListener('click', () => {
                fileInput.value = '';
                fileInfo.style.display = 'none';
                uploadArea.style.display = 'block';
                progressBar.style.width = '0%';
            });

            // Compression level change
            compressionLevel.addEventListener('input', function() {
                updateEstimatedSize();
            });

            // Compress button click
            compressBtn.addEventListener('click', async () => {
                if (!fileInput.files[0]) {
                    alert('Please select a PDF file first.');
                    return;
                }

                compressBtn.disabled = true;
                progressBar.style.width = '50%';

                try {
                    const quality = compressionLevel.value;
                    const compressedPdf = await pdfTools.compressPDF(fileInput.files[0], quality);
                    
                    progressBar.style.width = '100%';
                    
                    // Download the compressed file
                    const originalName = fileInput.files[0].name;
                    const newName = originalName.replace('.pdf', '_compressed.pdf');
                    pdfTools.downloadFile(compressedPdf, newName);
                    
                    // Reset the form
                    setTimeout(() => {
                        removeFile.click();
                        compressBtn.disabled = false;
                    }, 1000);
                } catch (error) {
                    console.error('Error compressing PDF:', error);
                    alert('Error compressing PDF. Please try again.');
                    progressBar.style.width = '0%';
                    compressBtn.disabled = false;
                }
            });

            function handleFile(file) {
                if (file && file.type === 'application/pdf') {
                    fileName.textContent = file.name;
                    fileSize.textContent = pdfTools.formatFileSize(file.size);
                    uploadArea.style.display = 'none';
                    fileInfo.style.display = 'block';
                    updateEstimatedSize();
                } else {
                    alert('Please select a PDF file.');
                }
            }

            function updateEstimatedSize() {
                const originalSize = fileInput.files[0] ? fileInput.files[0].size : 0;
                const level = compressionLevel.value;
                const compressionRates = [0.9, 0.7, 0.5, 0.3]; // Estimated compression rates for each level
                const estimatedSizeBytes = originalSize * compressionRates[level - 1];
                estimatedSize.textContent = pdfTools.formatFileSize(estimatedSizeBytes);
            }
        });
    </script>
</body>
</html> 